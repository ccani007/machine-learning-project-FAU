{
  "hash": "902202bc7fbaeec18bcf402718f25091",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Logistic Regression\"\n---\n\n\nLogistic regression is a statistical model that...\n\n### Model Overview\n\nLogistic regression is used when the dependent variable is binary (0/1, Yes/No, True/False). The model estimates the probability of the dependent variable being 1 given the independent variables.\n\n### Implementation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidymodels)\nlibrary(tidyverse)\nlibrary(dissertationData)\nlibrary(here)\n\n# Load and prepare the YRBS 2023 dataset\n```\n:::\n\n\n\n### Load the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nanalysis_data <- readRDS(here(\"models\", \"data\", \"analysis_data.rds\"))\nanalysis_train <- readRDS(here(\"models\", \"data\", \"analysis_train.rds\"))\nanalysis_test <- readRDS(here(\"models\", \"data\", \"analysis_test.rds\"))\nanalysis_folds <- readRDS(here(\"models\", \"data\", \"analysis_folds.rds\"))\n```\n:::\n\n### Recipe\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweapon_carry_recipe <- \n  recipe(formula = WeaponCarryingSchool ~ ., data = analysis_data) |>\n  step_impute_mode(all_nominal_predictors()) |>\n  step_impute_mean(all_numeric_predictors()) |>\n  step_zv(all_predictors()) |> \n  step_corr(all_numeric_predictors(), threshold = 0.7) \n\nweapon_carry_recipe\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Recipe ──────────────────────────────────────────────────────────────────────\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Inputs \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nNumber of variables by role\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\noutcome:    1\npredictor: 10\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Operations \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• Mode imputation for: all_nominal_predictors()\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• Mean imputation for: all_numeric_predictors()\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• Zero variance filter on: all_predictors()\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• Correlation filter on: all_numeric_predictors()\n```\n\n\n:::\n:::\n\n\n### Bake \n\n\n::: {.cell}\n\n```{.r .cell-code}\nrec <- weapon_carry_recipe %>% \n  prep() %>% \n  bake(new_data = analysis_data) %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 19,595\nColumns: 11\n$ AttackedInNeighborhood   <fct> 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, …\n$ Bullying                 <fct> 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ SexualAbuseByOlderPerson <fct> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, …\n$ ParentalPhysicalAbuse    <fct> 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ ParentSubstanceUse       <fct> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, …\n$ ParentIncarceration      <fct> 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ SchoolConnectedness      <fct> 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, …\n$ ParentalMonitoring       <fct> 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, …\n$ UnfairDisciplineAtSchool <fct> 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ Homelessness             <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ WeaponCarryingSchool     <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n```\n\n\n:::\n:::\n\n\n\n\n### Model Specification\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweapon_carry_spec <- \n  logistic_reg() %>% \n  set_mode(\"classification\") %>% \n  set_engine(\"glm\") \n\nweapon_carry_spec\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLogistic Regression Model Specification (classification)\n\nComputational engine: glm \n```\n\n\n:::\n:::\n\n\n### Workflow\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweapon_carry_workflow <- workflow() %>%\n  add_recipe(weapon_carry_recipe) %>%\n  add_model(weapon_carry_spec)\n\n\nweapon_carry_workflow\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: logistic_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n4 Recipe Steps\n\n• step_impute_mode()\n• step_impute_mean()\n• step_zv()\n• step_corr()\n\n── Model ───────────────────────────────────────────────────────────────────────\nLogistic Regression Model Specification (classification)\n\nComputational engine: glm \n```\n\n\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmod_1 <- \n  fit(weapon_carry_workflow, data = analysis_train) \n\nmod_1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: logistic_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n4 Recipe Steps\n\n• step_impute_mode()\n• step_impute_mean()\n• step_zv()\n• step_corr()\n\n── Model ───────────────────────────────────────────────────────────────────────\n\nCall:  stats::glm(formula = ..y ~ ., family = stats::binomial, data = data)\n\nCoefficients:\n              (Intercept)    AttackedInNeighborhood1  \n                 -3.29938                    0.74950  \n                Bullying1  SexualAbuseByOlderPerson1  \n                  0.48405                    0.46540  \n   ParentalPhysicalAbuse1        ParentSubstanceUse1  \n                  0.71713                   -0.15917  \n     ParentIncarceration1       SchoolConnectedness1  \n                  0.07048                   -0.25542  \n      ParentalMonitoring1  UnfairDisciplineAtSchool1  \n                  0.59860                   -0.24268  \n            Homelessness1  \n                  1.18053  \n\nDegrees of Freedom: 14695 Total (i.e. Null);  14685 Residual\nNull Deviance:\t    5238 \nResidual Deviance: 4872 \tAIC: 4894\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntidy_model <- \n  mod_1 |>\n  tidy(exponentiate = TRUE,\n       conf.int = TRUE, \n       conf.level = .95) |>\n  mutate(p.value = scales::pvalue(p.value))\n\ntidy_model\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 11 × 7\n   term                  estimate std.error statistic p.value conf.low conf.high\n   <chr>                    <dbl>     <dbl>     <dbl> <chr>      <dbl>     <dbl>\n 1 (Intercept)             0.0369    0.166    -19.9   <0.001    0.0266    0.0508\n 2 AttackedInNeighborho…   2.12      0.0954     7.85  <0.001    1.75      2.55  \n 3 Bullying1               1.62      0.0919     5.27  <0.001    1.35      1.94  \n 4 SexualAbuseByOlderPe…   1.59      0.133      3.51  <0.001    1.22      2.06  \n 5 ParentalPhysicalAbus…   2.05      0.179      4.01  <0.001    1.43      2.89  \n 6 ParentSubstanceUse1     0.853     0.111     -1.44  0.151     0.688     1.06  \n 7 ParentIncarceration1    1.07      0.126      0.560 0.575     0.841     1.38  \n 8 SchoolConnectedness1    0.775     0.0970    -2.63  0.008     0.639     0.935 \n 9 ParentalMonitoring1     1.82      0.114      5.26  <0.001    1.45      2.27  \n10 UnfairDisciplineAtSc…   0.785     0.114     -2.13  0.033     0.629     0.984 \n11 Homelessness1           3.26      0.155      7.61  <0.001    2.39      4.39  \n```\n\n\n:::\n:::\n\n\n### Model Evaluation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Evaluate the model\n# [Add your model evaluation code here]\n```\n:::\n\n\n### Results and Interpretation\n\n\n\n### Visualizations\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add your visualizations here\n```\n:::\n\n\n### Key Takeaways\n\n\n\n### References\n\n",
    "supporting": [
      "logistic_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}